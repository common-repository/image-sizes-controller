!function(e){"use strict";var s=window.gpls_issl_images_subsizes_list_localize_vars;e(document).on("ready",(function(){function a(a,t="bg-primary"){let i=e("."+s.prefix+"-toast");i.removeClass("bg-primary bg-danger").addClass(t),i.find(".toast-msg").html(a),i.collapse("show"),setTimeout((()=>{i.collapse("hide")}),3e3)}[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map((function(e){return new bootstrap.Tooltip(e)})),e(".accordion-toggle").on("click",(s=>{e(s.target).closest(".accordion-container").find(".accordion-body").collapse("toggle")})),e(document).on("click",".size-item-toggle",(s=>{e(s.target).closest(".size-item").find(".size-item-details").collapse("toggle")})),e(document).on("click",".size-item-head",(s=>{e(s.target).next(".size-item-details").collapse("toggle")})),e(document).on("click",".edit-size",(a=>{let t={},i=e(a.target).closest(".size-item");t.name=i.data("size"),t.title=i.find(".size-title").text(),t.width=i.find(".size-width").data("width"),t.height=i.find(".size-height").data("height"),t.crop=i.find(".size-crop").data("crop"),function(a){let t=e(".create-subsize-section ");t.find("."+s.prefix+"-subsize-name").val(a.title),t.find("."+s.prefix+"-subsize-w").val(a.width),t.find("."+s.prefix+"-subsize-h").val(a.height),t.find("."+s.prefix+"-subsize-crop").val(a.crop),t.find("."+s.prefix+"-create-new-subsize").attr("disabled",!1),e("html, body").animate({scrollTop:t.offset().top})}(t)})),e(".create-new-subsize-wrapper").on("change input","."+s.prefix+"-subsize-name, ."+s.prefix+"-subsize-w, ."+s.prefix+"-subsize-h",(a=>{e(a.target);let t=e("."+s.prefix+"-subsize-name").val(),i=e("."+s.prefix+"-subsize-w").val(),d=e("."+s.prefix+"-subsize-h").val();e("."+s.prefix+"-subsize-crop").val(),t.length&&0<i&&0<d?e("."+s.prefix+"-create-new-subsize").attr("disabled",!1):e("."+s.prefix+"-create-new-subsize").attr("disabled",!0)})),e(document).on("click","."+s.prefix+"-create-new-subsize",(t=>{t.preventDefault(),e(".imgedit-cancel-btn").click(),e(t.target),e("#"+s.name+"-image-subsizes-list-metabox");let i=e("."+s.prefix+"-subsize-name").val(),d=e("."+s.prefix+"-subsize-w").val(),n=e("."+s.prefix+"-subsize-h").val(),o=e("."+s.prefix+"-subsize-crop").val(),l=e("."+s.prefix+"-img-name-prefix-filter").val();e(".loader").removeClass("d-none"),e.ajax({method:"POST",url:s.ajaxUrl,dataType:"json",data:{action:s.addImageSizeAction,nonce:s.nonce,subsizeName:i,width:d,height:n,crop:o,imgPrefix:l},success:t=>{if(t.data.newSizeHTML){let a=t.data.newSizeHTML;e(".new-sizes-list").append(a),e("html, body").animate({scrollTop:e("#img-size-"+t.data.subsize).offset().top}),e("."+s.prefix+"-subsize-name").val(""),e("."+s.prefix+"-subsize-w").val(0),e("."+s.prefix+"-subsize-h").val(0),e("."+s.prefix+"-subsize-crop").prop("checked",!1),e("."+s.prefix+"-create-new-subsize").prop("disabled",!0)}t.data.disabledSizes&&e(".disabled-sizes-list").html(t.data.disabledSizes),t.data.message&&a(t.data.message,t?.data?.status)},error:e=>{e.responseText&&a(e.responseText,"bg-danger")},complete:()=>{e(".loader").addClass("d-none")}})})),e(document).on("click",".remove-size",(t=>{if(t.preventDefault(),!confirm(s.labels.deleteSize))return;let i=e(t.target).data("size");e(".loader").removeClass("d-none"),e.ajax({method:"POST",url:s.ajaxUrl,dataType:"json",data:{action:s.deleteImageSizeAction,nonce:s.nonce,subsizeName:i},success:s=>{e("#img-size-"+i).remove(),s.data.disabledSizes&&e(".disabled-sizes-list").html(s.data.disabledSizes),s.data.message&&a(s.data.message,s?.data?.status)},error:e=>{e.responseText&&a(e.responseText,"bg-danger")},complete:()=>{e(".loader").addClass("d-none")}})})),e(document).on("change",".disable-size",(s=>{e(".disabled-sizes-col .unsaved-changes").removeClass("d-none")})),e(document).on("input change",".size-item *",(s=>{e(s.target).closest(".size-item").find(".unsaved-changes").removeClass("d-none")})),e(document).on("input change",".additional-settings-col *",(s=>{e(s.target).closest(".additional-settings-col").find(".unsaved-changes").removeClass("d-none")})),e(document).on("click","."+s.prefix+"-save-disabled-sizes",(t=>{t.preventDefault();var i=e(t.target);let d=e(".hide-disabled-sizes").is(":checked");var n=i.closest(".disabled-sizes-col");let o=[];e(".disable-size").each((function(s){let a=e(this);if(a.prop("checked")){let e=a.data("size");o.push(e)}})),e(".loader").removeClass("d-none"),e.ajax({method:"POST",url:s.ajaxUrl,dataType:"json",data:{action:s.disableImageSizesAction,nonce:s.nonce,subsizesNames:o,hideDisabled:d},success:e=>{e.data.message&&a(e.data.message,e?.data?.status)},error:e=>{e.responseText&&a(e.responseText,"bg-danger")},complete:()=>{e(".loader").addClass("d-none"),n.find(".unsaved-changes").addClass("d-none")}})})),e(document).on("click","."+s.prefix+"-update-subsize",(t=>{t.preventDefault();let i=e(t.target),d=i.data("size"),n=i.closest(".size-item"),o=i.closest(".size-item-details"),l=o.find(".subsize-w").val(),r=o.find(".subsize-h").val(),c=o.find(".subsize-crop").val(),p=o.find(".img-name-prefix-filter").val();e(".loader").removeClass("d-none"),e.ajax({method:"POST",url:s.ajaxUrl,dataType:"json",data:{action:s.updateSizeAction,nonce:s.nonce,subsizeName:d,width:l,height:r,crop:c,imgPrefix:p},success:e=>{e.data.message&&a(e.data.message,e?.data?.status)},error:e=>{e.responseText&&a(e.responseText,"bg-danger")},complete:()=>{e(".loader").addClass("d-none"),n.find(".unsaved-changes").addClass("d-none")}})})),e(document).on("click","."+s.prefix+"-update-settings",(t=>{t.preventDefault();let i=e(t.target),d=e(".disable-big-image-threshold").prop("checked"),n=i.closest(".additional-settings-col");e(".loader").removeClass("d-none"),e.ajax({method:"POST",url:s.ajaxUrl,dataType:"json",data:{action:s.settingsAction,nonce:s.nonce,threshold_status:d},success:e=>{e.data.message&&a(e.data.message,e?.data?.status)},error:e=>{e.responseText&&a(e.responseText,"bg-danger")},complete:()=>{e(".loader").addClass("d-none"),n.find(".unsaved-changes").addClass("d-none")}})}))}))}(jQuery);