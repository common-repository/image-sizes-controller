(()=>{"use strict";var e,s;e=jQuery,s=window.gpls_issl_images_subsizes_list_localize_vars,e((function(a){function t(a,t="bg-primary"){let i=e("."+s.prefix+"-toast");i.removeClass("bg-primary bg-danger").addClass(t),i.find(".toast-msg").html(a),i.collapse("show"),setTimeout((()=>{i.collapse("hide")}),3e3)}[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map((function(e){return new bootstrap.Tooltip(e)})),jQuery('[data-bs-element="collapse"]').each(((e,s)=>{s=jQuery(s),new bootstrap.Collapse(s),"show"===s.data("bs-default")?s.toggle("show"):s.toggle("hide")})),e(document).on("click","."+s.prefix+"-missing-subsize-image-create",(a=>{a.preventDefault(),e(".imgedit-cancel-btn").click();var i=e(a.target);let o=e("#"+s.name+"-image-subsizes-list-metabox"),l=i.data("attachmentid"),n=i.data("subsize"),r=i.data("context");e(".loader").removeClass("d-none"),e.ajax({method:"POST",url:s.ajaxUrl,dataType:"json",data:{action:s.subsizeGenerateAction,nonce:s.nonce,attachment_id:l,subsize:n},success:s=>{if(s.data.result){let a=s.data.subsizeHTML,t=e("#subsize-"+n+"-col");t.length?t.replaceWith(a):o.find(".subsizes-list-container").append(a),"subsize"===r&&e("#missing-subsize-"+n).remove(),e("html, body").animate({scrollTop:e("#subsize-"+n+"-col").offset().top})}s.data.message&&t(s.data.message,s?.data?.status)},error:e=>{e.responseText&&t(resp.responseText,"bg-danger")},complete:()=>{e(".loader").addClass("d-none")}})})),e(document).on("click","."+s.prefix+"-delete-image-subsize",(a=>{if(a.preventDefault(),!confirm(s.labels.deleteSubsize))return;e(".imgedit-cancel-btn").click();var i=e(a.target);let o=e("#"+s.name+"-image-subsizes-list-metabox"),l=i.data("attachmentid"),n=i.data("subsize");i.data("context"),e(".loader").removeClass("d-none"),e.ajax({method:"POST",url:s.ajaxUrl,dataType:"json",data:{action:s.deleteSubsizeAction,nonce:s.nonce,attachment_id:l,subsize:n},success:s=>{s.data.result&&e("#subsize-"+n+"-col").remove(),s.data.message&&t(s.data.message),s.data.missingSubsizeHTML&&o.find(".missing-subsizes-list .list-group").append(s.data.missingSubsizeHTML)},error:e=>{e.responseText&&t(resp.responseText,"bg-danger")},complete:()=>{e(".loader").addClass("d-none")}})})),e(document).on("click","."+s.prefix+"-resize-image-subsize",(s=>{s.preventDefault(),e(s.target).closest(".subsize-action").find(".resize-subsize-box").collapse("toggle")}))}))})();